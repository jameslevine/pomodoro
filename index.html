<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Pomodoro Clock</title>
  <meta name="description" content="Pomodoro Clock">
  <meta name="author" content="James">

  <style>
    .breaksession {
      display: inline-block;
    }
  </style>
</head>

<body>
  <h1>Pomodoro Clock</h1>
  <h3>by James Levine</h3>
  <h4>Break Length</h4>
  <ul class="breaksession">
  <li><button onclick="upBreak()">▲</button></li>
  <li id="currentBreak">5</li>
  <li><button onclick="downBreak()">▼</button></li>
  </ul>
  <h4>Session Length</h4>
  <ul class="breaksession">
    <li><button onclick="upSession()">▲</button></li>
    <li id="currentSession">5</li>
    <li><button onclick="downSession()">▼</button></li>
  </ul>
  <h4>Time Remaining</h4>
  <input id="timeRemaining" type="text" name="" value="00:00">
  <input id="breakTimeRemaining" type="text" name="" value="00:00">
  <button type="button" name="button" onclick="startCountdown()">Start</button>
  <script>

let arr = [];

function upBreak() {
  let current = document.getElementById("currentBreak").innerHTML;
  let newCurrent = Number(current)+1;
  document.getElementById("currentBreak").innerHTML = newCurrent;
  if (newCurrent > 0 && newCurrent < 10) {
  document.getElementById("currentBreak").innerHTML = newCurrent;
  document.getElementById("breakTimeRemaining").value = "0" + newCurrent + ":00";
} else if (newCurrent >= 10) {
  document.getElementById("currentBreak").innerHTML = newCurrent;
  document.getElementById("breakTimeRemaining").value = newCurrent + ":00";
}
}
function downBreak() {
  let current = document.getElementById("currentBreak").innerHTML;
  let newCurrent = Number(current)-1;
  if (newCurrent > 0 && newCurrent < 10) {
  document.getElementById("currentBreak").innerHTML = newCurrent;
  document.getElementById("breakTimeRemaining").value = "0" + newCurrent + ":00";
} else if (newCurrent >= 10) {
  document.getElementById("currentBreak").innerHTML = newCurrent;
  document.getElementById("breakTimeRemaining").value = newCurrent + ":00";
}
}
function upSession() {
  let current = document.getElementById("currentSession").innerHTML;
  let newCurrent = Number(current)+1;
  if (newCurrent > 0 && newCurrent < 10) {
  document.getElementById("currentSession").innerHTML = newCurrent;
  document.getElementById("timeRemaining").value = "0" + newCurrent + ":00";
} else if (newCurrent >= 10) {
  document.getElementById("currentSession").innerHTML = newCurrent;
  document.getElementById("timeRemaining").value = newCurrent + ":00";
}
}
function downSession() {
  let current = document.getElementById("currentSession").innerHTML;
  let newCurrent = Number(current)-1;
  if (newCurrent > 0 && newCurrent < 10) {
  document.getElementById("currentSession").innerHTML = newCurrent;
  document.getElementById("timeRemaining").value = "0" + newCurrent + ":00";
} else if (newCurrent >= 10) {
  document.getElementById("currentSession").innerHTML = newCurrent;
  document.getElementById("timeRemaining").value = newCurrent + ":00";
  }
  }

function startCountdown() {
    let currentTime = document.getElementById("timeRemaining").value;
    let currentTimeSplit = currentTime.split("");
    console.log(currentTimeSplit[0].concat(currentTimeSplit[1]));
    let minuteCount = currentTimeSplit[0].concat(currentTimeSplit[1]);
    console.log(minuteCount);
    timeArr[0] = minuteCount;
    var myVar = setInterval(myTimer, 1000);
  }

var minutes = document.getElementById("currentSession").innerHTML;
var minutesSplit = minutes.split(":");
var time = 0;
var minuteNum = "";
var timeArr = [minutesSplit[0], ":", 00];
var endSessionTime = true;
  function myTimer() {
    //console.log(currentTime);
    if (endSessionTime === false){
      return;
    }
    if (time > 0) {
    time--;
    timeArr[2]--;
    breakCountdown();
    document.getElementById("timeRemaining").value = timeArr.join("");
    console.log(timeArr.join(""));
  } else if (time === 0) {
    time = 59;
    timeArr[2] = 59;
    timeArr[0]--;
    breakCountdown();
    console.log(timeArr.join(""));
    document.getElementById("timeRemaining").value = timeArr.join("");
  }
  }

function breakCountdown() {
  //console.log(timeArr.join(""));
  if (timeArr.join("") === "0:0" || timeArr.join("") === "00:00") {
    console.log("It's at zero!");
    endSessionTime = false;
    startBreakCountdown();
  }
}

function startBreakCountdown() {
    let currentBreakTime = document.getElementById("breakTimeRemaining").value;
    let currentBreakTimeSplit = currentBreakTime.split("");
    console.log(currentBreakTimeSplit[0].concat(currentBreakTimeSplit[1]));
    let minuteBreakCount = currentBreakTimeSplit[0].concat(currentBreakTimeSplit[1]);
    console.log(minuteBreakCount);
    timeBreakArr[0] = minuteBreakCount;
    var myBreakVar = setInterval(myBreakTimer, 1000);
  }

  var minutesBreak = document.getElementById("currentBreak").innerHTML;
  var minutesBreakSplit = minutes.split(":");
  var timeBreak = 0;
  var minuteNum = "";
  var timeBreakArr = [minutesSplit[0], ":", 00];

  function myBreakTimer() {
    //console.log(currentTime);
    if (timeBreak > 0) {
    timeBreak--;
    timeBreakArr[2]--;
    breakTimeEndCountdown();
    document.getElementById("breakTimeRemaining").value = timeBreakArr.join("");
    console.log(timeBreakArr.join(""));
  } else if (timeBreak === 0) {
    timeBreak = 59;
    timeBreakArr[2] = 59;
    timeBreakArr[0]--;
    breakTimeEndCountdown();
    console.log(timeBreakArr.join(""));
    document.getElementById("breakTimeRemaining").value = timeBreakArr.join("");
  }
  }

  function breakTimeEndCountdown() {
    //console.log(timeArr.join(""));
    if (timeBreakArr.join("") === "0:0" || timeBreakArr.join("") === "00:00") {
      console.log("It's at zero!");
    }
  }

</script>
</body>
</html>
